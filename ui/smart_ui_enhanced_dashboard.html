<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerAutomation æ™ºæ…§UI Dashboard v1.0</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #1f2937;
            line-height: 1.6;
        }

        /* ä¸»å®¹å™¨ - ä¸‰æ å¸ƒå±€ */
        .smart-ui-container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* å·¦ä¾§çŠ¶æ€é¢æ¿ - 280px */
        .status-panel {
            width: 280px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-right: 1px solid #e2e8f0;
            padding: 16px;
            overflow-y: auto;
            transition: all 0.3s ease;
        }

        .status-panel-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e2e8f0;
        }

        .status-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-left: 8px;
        }

        /* MCPåè°ƒå™¨çŠ¶æ€ */
        .mcp-coordinator-status {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
        }

        .mcp-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .mcp-title {
            display: flex;
            align-items: center;
            font-weight: 600;
            font-size: 14px;
            color: #1e40af;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-active {
            background: #10b981;
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
            animation: pulse 2s infinite;
        }

        .status-idle {
            background: #6b7280;
        }

        .status-error {
            background: #ef4444;
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* é£ä¹¦é›†æˆçŠ¶æ€ */
        .feishu-integration-status {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid #10b981;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.1);
        }

        .feishu-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .feishu-title {
            display: flex;
            align-items: center;
            font-weight: 600;
            font-size: 14px;
            color: #065f46;
        }

        .feishu-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            font-size: 11px;
        }

        .stat-number {
            font-weight: 700;
            font-size: 16px;
            color: #065f46;
        }

        .stat-label {
            color: #6b7280;
            margin-top: 2px;
        }

        /* GitHubåŒæ­¥çŠ¶æ€ */
        .github-sync-status {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            border: 1px solid #f59e0b;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.1);
        }

        .github-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .github-title {
            display: flex;
            align-items: center;
            font-weight: 600;
            font-size: 14px;
            color: #92400e;
        }

        .last-sync {
            font-size: 11px;
            color: #6b7280;
            margin-top: 8px;
        }

        /* ä¸­é—´AIå¯¹è¯åŒºåŸŸ - flex:1 */
        .ai-chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #ffffff;
            position: relative;
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .ai-status {
            display: flex;
            align-items: center;
        }

        .ai-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 16px;
        }

        .ai-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .ai-info p {
            font-size: 12px;
            opacity: 0.9;
        }

        .intervention-mode {
            display: flex;
            gap: 8px;
        }

        .mode-badge {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.2);
        }

        /* å®æ—¶è¿›åº¦ç›‘æ§ */
        .progress-monitor {
            background: #f8fafc;
            border-bottom: 1px solid #e5e7eb;
            padding: 12px 24px;
        }

        .current-task {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .task-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .task-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .task-text {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
        }

        .task-progress {
            font-size: 12px;
            color: #6b7280;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            border-radius: 2px;
            transition: width 0.3s ease;
            animation: progressAnimation 2s ease-in-out infinite;
        }

        @keyframes progressAnimation {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* å¯¹è¯æ¶ˆæ¯åŒºåŸŸ */
        .chat-messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            background: #fafafa;
        }

        .message {
            margin-bottom: 24px;
            display: flex;
            align-items: flex-start;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            margin: 0 12px;
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .message.user .message-avatar {
            background: #e5e7eb;
            color: #374151;
        }

        .message-content {
            max-width: 70%;
            background: white;
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }

        /* æ™ºèƒ½å»ºè®®å¡ç‰‡ */
        .smart-suggestions {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 12px;
            padding: 16px;
            margin-top: 12px;
        }

        .suggestions-header {
            font-size: 14px;
            font-weight: 600;
            color: #0369a1;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }

        .suggestion-card {
            background: white;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            border: 1px solid #e0f2fe;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .suggestion-card:hover {
            background: #f0f9ff;
            border-color: #0ea5e9;
            transform: translateY(-1px);
        }

        .suggestion-text {
            font-size: 13px;
            color: #0369a1;
            font-weight: 500;
        }

        .suggestion-action {
            font-size: 11px;
            color: #0ea5e9;
            background: #e0f2fe;
            padding: 4px 8px;
            border-radius: 4px;
        }

        /* è¾“å…¥åŒºåŸŸ */
        .chat-input-area {
            background: white;
            border-top: 1px solid #e5e7eb;
            padding: 16px 24px;
        }

        .input-container {
            display: flex;
            align-items: flex-end;
            gap: 12px;
            background: #f9fafb;
            border: 1px solid #d1d5db;
            border-radius: 12px;
            padding: 12px;
            transition: all 0.2s ease;
        }

        .input-container:focus-within {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .chat-input {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            font-size: 14px;
            line-height: 1.5;
            resize: none;
            min-height: 20px;
            max-height: 120px;
        }

        .input-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .intervention-toggle {
            display: flex;
            gap: 4px;
        }

        .toggle-btn {
            padding: 6px 10px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .toggle-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .send-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .send-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        /* å³ä¾§å·¥ä½œæµé¢æ¿ - 320px */
        .workflow-panel {
            width: 320px;
            background: linear-gradient(135deg, #fefefe 0%, #f8fafc 100%);
            border-left: 1px solid #e2e8f0;
            padding: 16px;
            overflow-y: auto;
        }

        .workflow-header {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e2e8f0;
        }

        /* ä¸‰èŠ‚ç‚¹å·¥ä½œæµDashboard */
        .workflow-nodes {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
        }

        .workflow-node {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .workflow-node::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #6b7280, #9ca3af);
        }

        .workflow-node.coding::before {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        }

        .workflow-node.testing::before {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .workflow-node.deployment::before {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .workflow-node.active {
            border-color: #10b981;
            background: linear-gradient(135deg, #f0fdf4, #ffffff);
            transform: translateX(4px);
        }

        .node-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .node-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
        }

        .node-icon {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        .node-icon.coding {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .node-icon.testing {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .node-icon.deployment {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .node-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 500;
        }

        .status-running {
            background: #dcfce7;
            color: #166534;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-completed {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-error {
            background: #fee2e2;
            color: #991b1b;
        }

        .node-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
        }

        .metric-item {
            background: #f8fafc;
            padding: 6px;
            border-radius: 4px;
            text-align: center;
            font-size: 10px;
        }

        .metric-value {
            font-weight: 700;
            font-size: 12px;
            color: #374151;
        }

        .metric-label {
            color: #6b7280;
            margin-top: 2px;
        }

        /* å·¥ä½œæµå¯è§†åŒ– */
        .workflow-visualization {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .workflow-canvas {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
        }

        .visual-node {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .visual-node.coding {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .visual-node.testing {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .visual-node.deployment {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .visual-node:hover {
            transform: scale(1.1);
        }

        .visual-node.active {
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
        }

        .visual-node::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 10px;
            background: #d1d5db;
        }

        .visual-node:last-child::after {
            display: none;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1024px) {
            .workflow-panel {
                width: 280px;
            }
            
            .status-panel {
                width: 240px;
            }
        }

        @media (max-width: 768px) {
            .smart-ui-container {
                flex-direction: column;
            }
            
            .status-panel,
            .workflow-panel {
                width: 100%;
                height: auto;
                max-height: 200px;
            }
            
            .ai-chat-area {
                flex: 1;
                min-height: 400px;
            }
        }

        /* åŠ¨ç”»æ•ˆæœ */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #6b7280;
            font-size: 12px;
            margin-top: 8px;
        }

        .typing-dots {
            display: flex;
            gap: 2px;
        }

        .typing-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: #6b7280;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* é€šçŸ¥ç³»ç»Ÿ */
        .notification-toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            border-left: 4px solid #10b981;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification-toast.show {
            transform: translateX(0);
        }

        .toast-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .toast-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #10b981;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        .toast-title {
            font-weight: 600;
            color: #065f46;
            font-size: 14px;
        }

        .toast-message {
            font-size: 12px;
            color: #6b7280;
            line-height: 1.4;
        }
    </style>
</head>
<body>
    <div class="smart-ui-container">
        <!-- å·¦ä¾§çŠ¶æ€é¢æ¿ -->
        <div class="status-panel">
            <div class="status-panel-header">
                <div class="status-indicator status-active"></div>
                <div class="status-title">ç³»ç»ŸçŠ¶æ€ç›‘æ§</div>
            </div>

            <!-- MCPåè°ƒå™¨çŠ¶æ€ -->
            <div class="mcp-coordinator-status">
                <div class="mcp-header">
                    <div class="mcp-title">
                        <div class="status-indicator status-active"></div>
                        MCPåè°ƒå™¨
                    </div>
                    <span style="font-size: 12px; color: #1e40af;">è¿è¡Œä¸­</span>
                </div>
                <div style="font-size: 12px; color: #6b7280; margin-bottom: 8px;">
                    ç»Ÿä¸€å·¥ä½œæµåè°ƒ | æ™ºèƒ½ä»‹å…¥ç®¡ç†
                </div>
                <div style="font-size: 11px; color: #374151;">
                    â€¢ Qwen 8Bæœ¬åœ°æ¨¡å‹: æ´»è·ƒ<br>
                    â€¢ RL-SRTå­¦ä¹ å¼•æ“: è¿è¡Œ<br>
                    â€¢ å¼€å‘ä»‹å…¥æ£€æµ‹: å¯ç”¨<br>
                    â€¢ æ¶æ„åˆè§„æ£€æŸ¥: å®æ—¶
                </div>
            </div>

            <!-- é£ä¹¦é›†æˆçŠ¶æ€ -->
            <div class="feishu-integration-status">
                <div class="feishu-header">
                    <div class="feishu-title">
                        <div class="status-indicator status-active"></div>
                        é£ä¹¦é›†æˆ
                    </div>
                    <span style="font-size: 12px; color: #065f46;">å·²è¿æ¥</span>
                </div>
                <div style="font-size: 12px; color: #6b7280; margin-bottom: 8px;">
                    å®æ—¶é€šçŸ¥ | å›¢é˜Ÿåä½œ | ç§»åŠ¨ç«¯åŒæ­¥
                </div>
                <div class="feishu-stats">
                    <div class="stat-item">
                        <div class="stat-number">24</div>
                        <div class="stat-label">ä»Šæ—¥é€šçŸ¥</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">3</div>
                        <div class="stat-label">æ´»è·ƒç¾¤ç»„</div>
                    </div>
                </div>
            </div>

            <!-- GitHubåŒæ­¥çŠ¶æ€ -->
            <div class="github-sync-status">
                <div class="github-header">
                    <div class="github-title">
                        <div class="status-indicator status-active"></div>
                        GitHubåŒæ­¥
                    </div>
                    <span style="font-size: 12px; color: #92400e;">åŒæ­¥ä¸­</span>
                </div>
                <div style="font-size: 12px; color: #6b7280; margin-bottom: 8px;">
                    powerauto.ai_0.53 | v0.6åˆ†æ”¯
                </div>
                <div style="font-size: 11px; color: #374151;">
                    â€¢ Webhook: æ­£å¸¸ç›‘å¬<br>
                    â€¢ è‡ªåŠ¨éƒ¨ç½²: å¯ç”¨<br>
                    â€¢ ä»£ç è´¨é‡æ£€æŸ¥: é€šè¿‡
                </div>
                <div class="last-sync">
                    æœ€ååŒæ­¥: 2åˆ†é’Ÿå‰
                </div>
            </div>

            <!-- ç³»ç»Ÿèµ„æºç›‘æ§ -->
            <div style="background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border-radius: 12px; padding: 16px; border: 1px solid #8b5cf6; box-shadow: 0 2px 8px rgba(139, 92, 246, 0.1);">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                    <div style="display: flex; align-items: center; font-weight: 600; font-size: 14px; color: #6b21a8;">
                        <div class="status-indicator status-active"></div>
                        ç³»ç»Ÿèµ„æº
                    </div>
                    <span style="font-size: 12px; color: #6b21a8;">å¥åº·</span>
                </div>
                <div style="font-size: 11px; color: #374151;">
                    CPU: 15% | å†…å­˜: 2.1GB<br>
                    ç½‘ç»œ: æ­£å¸¸ | å­˜å‚¨: 85%<br>
                    Amazon EC2: è¿è¡Œæ­£å¸¸
                </div>
            </div>
        </div>

        <!-- ä¸­é—´AIå¯¹è¯åŒºåŸŸ -->
        <div class="ai-chat-area">
            <div class="chat-header">
                <div class="ai-status">
                    <div class="ai-avatar">ğŸ¤–</div>
                    <div class="ai-info">
                        <h3>PowerAutomation AI</h3>
                        <p>æ™ºæ…§UIåŠ©æ‰‹ - åœ¨çº¿ | MCPåè°ƒä¸­</p>
                    </div>
                </div>
                <div class="intervention-mode">
                    <div class="mode-badge">Manus</div>
                    <div class="mode-badge">åº”ç”¨</div>
                    <div class="mode-badge">é£ä¹¦</div>
                </div>
            </div>

            <!-- å®æ—¶è¿›åº¦ç›‘æ§ -->
            <div class="progress-monitor">
                <div class="current-task">
                    <div class="task-info">
                        <div class="task-icon">
                            <i class="fas fa-code"></i>
                        </div>
                        <div class="task-text">æ­£åœ¨åˆ›å»ºæ™ºæ…§UI Dashboard...</div>
                    </div>
                    <div class="task-progress">75%</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 75%"></div>
                </div>
            </div>

            <div class="chat-messages">
                <!-- AIæ¶ˆæ¯ -->
                <div class="message ai">
                    <div class="message-avatar">AI</div>
                    <div class="message-content">
                        <p>ğŸ¯ <strong>æ™ºæ…§UI Dashboardåˆ›å»ºä¸­...</strong></p>
                        <p>æˆ‘æ­£åœ¨åŸºäºæ‚¨çš„é£ä¹¦SDKé›†æˆæ–¹æ¡ˆï¼Œåˆ›å»ºå®Œæ•´çš„æ™ºæ…§UIç³»ç»Ÿã€‚è¿™å°†è§£å†³æ‚¨æŸ¥GitHub 20+æ¬¡çš„é—®é¢˜ï¼</p>
                        
                        <div class="smart-suggestions">
                            <div class="suggestions-header">
                                <i class="fas fa-lightbulb"></i>
                                æ™ºèƒ½å»ºè®® - ä¸€æ­¥ç›´è¾¾
                            </div>
                            <div class="suggestion-card" onclick="executeAction('view_github_status')">
                                <div class="suggestion-text">æŸ¥çœ‹GitHubæœ€æ–°çŠ¶æ€</div>
                                <div class="suggestion-action">ç«‹å³æŸ¥çœ‹</div>
                            </div>
                            <div class="suggestion-card" onclick="executeAction('test_feishu_integration')">
                                <div class="suggestion-text">æµ‹è¯•é£ä¹¦é€šçŸ¥åŠŸèƒ½</div>
                                <div class="suggestion-action">å‘é€æµ‹è¯•</div>
                            </div>
                            <div class="suggestion-card" onclick="executeAction('check_mcp_status')">
                                <div class="suggestion-text">æ£€æŸ¥MCPåè°ƒå™¨çŠ¶æ€</div>
                                <div class="suggestion-action">ç³»ç»Ÿæ£€æŸ¥</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç”¨æˆ·æ¶ˆæ¯ç¤ºä¾‹ -->
                <div class="message user">
                    <div class="message-avatar">U</div>
                    <div class="message-content">
                        <p>å¾ˆå¥½ï¼æˆ‘éœ€è¦å®æ—¶çœ‹åˆ°æ‰€æœ‰å·¥ä½œæµçš„çŠ¶æ€ï¼Œç‰¹åˆ«æ˜¯ç¼–ç ã€æµ‹è¯•ã€éƒ¨ç½²ä¸‰ä¸ªèŠ‚ç‚¹çš„è¿›åº¦ã€‚</p>
                    </div>
                </div>

                <!-- AIå›å¤ -->
                <div class="message ai">
                    <div class="message-avatar">AI</div>
                    <div class="message-content">
                        <p>âœ… <strong>å®Œå…¨ç†è§£ï¼</strong></p>
                        <p>å³ä¾§é¢æ¿å·²ç»é›†æˆäº†ä¸‰èŠ‚ç‚¹å·¥ä½œæµDashboardï¼Œå®æ—¶æ˜¾ç¤ºï¼š</p>
                        <ul style="margin: 12px 0; padding-left: 20px;">
                            <li><strong>ç¼–ç èŠ‚ç‚¹</strong>: ä»£ç è´¨é‡ã€æ¶æ„åˆè§„æ€§ã€æäº¤è¿›åº¦</li>
                            <li><strong>æµ‹è¯•èŠ‚ç‚¹</strong>: æµ‹è¯•è¦†ç›–ç‡ã€ç”¨ä¾‹é€šè¿‡ç‡ã€ç¼ºé™·çŠ¶æ€</li>
                            <li><strong>éƒ¨ç½²èŠ‚ç‚¹</strong>: éƒ¨ç½²çŠ¶æ€ã€ç¯å¢ƒå¥åº·ã€å‘å¸ƒè¿›åº¦</li>
                        </ul>
                        <p>åŠ ä¸Šé£ä¹¦å®æ—¶é€šçŸ¥ï¼Œæ‚¨å†ä¹Ÿä¸éœ€è¦é¢‘ç¹æ£€æŸ¥GitHubäº†ï¼</p>
                        
                        <div class="typing-indicator">
                            <span>AIæ­£åœ¨ä¼˜åŒ–å·¥ä½œæµç›‘æ§...</span>
                            <div class="typing-dots">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input-area">
                <div class="input-container">
                    <textarea class="chat-input" placeholder="æè¿°æ‚¨çš„å¼€å‘éœ€æ±‚ï¼ŒAIå°†æ™ºèƒ½ä»‹å…¥ååŠ©..."></textarea>
                    <div class="input-actions">
                        <div class="intervention-toggle">
                            <button class="toggle-btn active">Manus</button>
                            <button class="toggle-btn active">åº”ç”¨</button>
                            <button class="toggle-btn">é£ä¹¦</button>
                        </div>
                        <button class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§å·¥ä½œæµé¢æ¿ -->
        <div class="workflow-panel">
            <div class="workflow-header">ä¸‰èŠ‚ç‚¹å·¥ä½œæµDashboard</div>

            <!-- å·¥ä½œæµå¯è§†åŒ– -->
            <div class="workflow-visualization">
                <div class="workflow-canvas">
                    <div class="visual-node coding active">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="visual-node testing">
                        <i class="fas fa-vial"></i>
                    </div>
                    <div class="visual-node deployment">
                        <i class="fas fa-rocket"></i>
                    </div>
                </div>
            </div>

            <!-- ä¸‰èŠ‚ç‚¹è¯¦ç»†çŠ¶æ€ -->
            <div class="workflow-nodes">
                <!-- ç¼–ç èŠ‚ç‚¹ -->
                <div class="workflow-node coding active">
                    <div class="node-header">
                        <div class="node-title">
                            <div class="node-icon coding">
                                <i class="fas fa-code"></i>
                            </div>
                            ç¼–ç å·¥ä½œæµ
                        </div>
                        <div class="node-status status-running">è¿è¡Œä¸­</div>
                    </div>
                    <div class="node-metrics">
                        <div class="metric-item">
                            <div class="metric-value">92%</div>
                            <div class="metric-label">ä»£ç è´¨é‡</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">100%</div>
                            <div class="metric-label">æ¶æ„åˆè§„</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">15</div>
                            <div class="metric-label">ä»Šæ—¥æäº¤</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">0</div>
                            <div class="metric-label">è¿è§„æ£€æµ‹</div>
                        </div>
                    </div>
                </div>

                <!-- æµ‹è¯•èŠ‚ç‚¹ -->
                <div class="workflow-node testing">
                    <div class="node-header">
                        <div class="node-title">
                            <div class="node-icon testing">
                                <i class="fas fa-vial"></i>
                            </div>
                            æµ‹è¯•å·¥ä½œæµ
                        </div>
                        <div class="node-status status-pending">å¾…æ‰§è¡Œ</div>
                    </div>
                    <div class="node-metrics">
                        <div class="metric-item">
                            <div class="metric-value">85%</div>
                            <div class="metric-label">è¦†ç›–ç‡</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">156</div>
                            <div class="metric-label">æµ‹è¯•ç”¨ä¾‹</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">2</div>
                            <div class="metric-label">å¤±è´¥ç”¨ä¾‹</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">3</div>
                            <div class="metric-label">ç¯å¢ƒçŠ¶æ€</div>
                        </div>
                    </div>
                </div>

                <!-- éƒ¨ç½²èŠ‚ç‚¹ -->
                <div class="workflow-node deployment">
                    <div class="node-header">
                        <div class="node-title">
                            <div class="node-icon deployment">
                                <i class="fas fa-rocket"></i>
                            </div>
                            éƒ¨ç½²å·¥ä½œæµ
                        </div>
                        <div class="node-status status-completed">å·²å®Œæˆ</div>
                    </div>
                    <div class="node-metrics">
                        <div class="metric-item">
                            <div class="metric-value">v0.6</div>
                            <div class="metric-label">å½“å‰ç‰ˆæœ¬</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">100%</div>
                            <div class="metric-label">å¥åº·æ£€æŸ¥</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">3</div>
                            <div class="metric-label">ç¯å¢ƒæ•°é‡</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-value">2min</div>
                            <div class="metric-label">æœ€åéƒ¨ç½²</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å¿«é€Ÿæ“ä½œ -->
            <div style="background: white; border-radius: 12px; padding: 16px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                <div style="font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 12px;">å¿«é€Ÿæ“ä½œ</div>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <button style="padding: 8px 12px; background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer;">
                        <i class="fas fa-sync"></i> åŒæ­¥GitHubçŠ¶æ€
                    </button>
                    <button style="padding: 8px 12px; background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer;">
                        <i class="fas fa-paper-plane"></i> å‘é€é£ä¹¦é€šçŸ¥
                    </button>
                    <button style="padding: 8px 12px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer;">
                        <i class="fas fa-play"></i> æ‰§è¡Œæµ‹è¯•æµç¨‹
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- é€šçŸ¥Toast -->
    <div class="notification-toast" id="notificationToast">
        <div class="toast-header">
            <div class="toast-icon">
                <i class="fas fa-check"></i>
            </div>
            <div class="toast-title">æ™ºæ…§UIæ›´æ–°</div>
        </div>
        <div class="toast-message">
            æ™ºæ…§UI Dashboardåˆ›å»ºå®Œæˆï¼é£ä¹¦é›†æˆå’ŒMCPåè°ƒå™¨å·²å°±ç»ªã€‚
        </div>
    </div>

    <script>
        // æ™ºæ…§UIäº¤äº’é€»è¾‘
        class SmartUIController {
            constructor() {
                // åç«¯APIåœ°å€
                this.apiBaseUrl = 'https://5001-ialfrwrbx12fkxq73c6c8-eb3d8dbf.manusvm.computer/api';
                this.initializeComponents();
                this.setupEventListeners();
                this.startRealTimeUpdates();
                this.loadInitialData();
            }

            initializeComponents() {
                this.progressBar = document.querySelector('.progress-fill');
                this.taskText = document.querySelector('.task-text');
                this.taskProgress = document.querySelector('.task-progress');
                this.chatInput = document.querySelector('.chat-input');
                this.sendBtn = document.querySelector('.send-btn');
                this.toggleBtns = document.querySelectorAll('.toggle-btn');
            }

            async loadInitialData() {
                try {
                    // åŠ è½½ç³»ç»ŸçŠ¶æ€
                    await this.updateSystemStatus();
                    // åŠ è½½MCPçŠ¶æ€
                    await this.updateMCPStatus();
                    // åŠ è½½å·¥ä½œæµçŠ¶æ€
                    await this.updateWorkflowStatus();
                    
                    this.addMessageToChat('ai', 'ğŸ‰ æ™ºæ…§UI Dashboardå·²è¿æ¥åˆ°åç«¯APIï¼æ‰€æœ‰ç³»ç»ŸçŠ¶æ€å®æ—¶åŒæ­¥ä¸­...');
                } catch (error) {
                    console.error('åˆå§‹æ•°æ®åŠ è½½å¤±è´¥:', error);
                    this.addMessageToChat('ai', 'âš ï¸ åç«¯APIè¿æ¥ä¸­æ–­ï¼Œæ­£åœ¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®...');
                }
            }

            async updateSystemStatus() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/system/status`);
                    const data = await response.json();
                    
                    // æ›´æ–°MCPåè°ƒå™¨çŠ¶æ€
                    this.updateMCPCoordinatorDisplay(data.mcp_coordinator);
                    
                    // æ›´æ–°é£ä¹¦é›†æˆçŠ¶æ€
                    this.updateFeishuDisplay(data.feishu_integration);
                    
                    // æ›´æ–°GitHubåŒæ­¥çŠ¶æ€
                    this.updateGitHubDisplay(data.github_sync);
                    
                    // æ›´æ–°ç³»ç»Ÿèµ„æºçŠ¶æ€
                    this.updateSystemResourcesDisplay(data.system_resources);
                    
                } catch (error) {
                    console.error('ç³»ç»ŸçŠ¶æ€æ›´æ–°å¤±è´¥:', error);
                }
            }

            async updateMCPStatus() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/mcp/status`);
                    const data = await response.json();
                    
                    // æ›´æ–°MCPæ³¨å†Œè¡¨æ˜¾ç¤º
                    this.updateMCPRegistryDisplay(data.registry);
                    
                } catch (error) {
                    console.error('MCPçŠ¶æ€æ›´æ–°å¤±è´¥:', error);
                }
            }

            async updateWorkflowStatus() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/mcp/workflow/nodes`);
                    const data = await response.json();
                    
                    // æ›´æ–°ä¸‰èŠ‚ç‚¹å·¥ä½œæµæ˜¾ç¤º
                    this.updateWorkflowNodesDisplay(data.nodes);
                    
                } catch (error) {
                    console.error('å·¥ä½œæµçŠ¶æ€æ›´æ–°å¤±è´¥:', error);
                }
            }

            updateMCPCoordinatorDisplay(mcpData) {
                const mcpStatus = document.querySelector('.mcp-coordinator-status');
                if (mcpStatus && mcpData) {
                    const statusText = mcpStatus.querySelector('span');
                    if (statusText) {
                        statusText.textContent = mcpData.status === 'active' ? 'è¿è¡Œä¸­' : 'ç¦»çº¿';
                    }
                }
            }

            updateFeishuDisplay(feishuData) {
                const feishuStatus = document.querySelector('.feishu-integration-status');
                if (feishuStatus && feishuData) {
                    const notificationCount = feishuStatus.querySelector('.stat-number');
                    if (notificationCount) {
                        notificationCount.textContent = feishuData.notifications_today || 24;
                    }
                }
            }

            updateGitHubDisplay(githubData) {
                const githubStatus = document.querySelector('.github-sync-status');
                if (githubStatus && githubData) {
                    const lastSync = githubStatus.querySelector('.last-sync');
                    if (lastSync) {
                        lastSync.textContent = `æœ€ååŒæ­¥: ${githubData.last_sync || '2åˆ†é’Ÿå‰'}`;
                    }
                }
            }

            updateSystemResourcesDisplay(resourceData) {
                // æ›´æ–°ç³»ç»Ÿèµ„æºæ˜¾ç¤º
                console.log('ç³»ç»Ÿèµ„æºçŠ¶æ€:', resourceData);
            }

            updateMCPRegistryDisplay(registryData) {
                // æ›´æ–°MCPæ³¨å†Œè¡¨æ˜¾ç¤º
                console.log('MCPæ³¨å†Œè¡¨:', registryData);
            }

            updateWorkflowNodesDisplay(nodesData) {
                if (!nodesData) return;
                
                // æ›´æ–°ç¼–ç èŠ‚ç‚¹
                this.updateNodeDisplay('coding', nodesData.coding);
                // æ›´æ–°æµ‹è¯•èŠ‚ç‚¹
                this.updateNodeDisplay('testing', nodesData.testing);
                // æ›´æ–°éƒ¨ç½²èŠ‚ç‚¹
                this.updateNodeDisplay('deployment', nodesData.deployment);
            }

            updateNodeDisplay(nodeType, nodeData) {
                if (!nodeData) return;
                
                const nodeElement = document.querySelector(`.workflow-node.${nodeType}`);
                if (!nodeElement) return;
                
                // æ›´æ–°çŠ¶æ€
                const statusElement = nodeElement.querySelector('.node-status');
                if (statusElement) {
                    statusElement.textContent = this.getStatusText(nodeData.status);
                    statusElement.className = `node-status status-${nodeData.status}`;
                }
                
                // æ›´æ–°æŒ‡æ ‡
                const metrics = nodeElement.querySelectorAll('.metric-value');
                if (metrics.length > 0 && nodeData.metrics) {
                    const metricValues = Object.values(nodeData.metrics);
                    metrics.forEach((metric, index) => {
                        if (metricValues[index] !== undefined) {
                            metric.textContent = metricValues[index];
                        }
                    });
                }
                
                // æ›´æ–°æ´»è·ƒçŠ¶æ€
                if (nodeData.status === 'running') {
                    nodeElement.classList.add('active');
                } else {
                    nodeElement.classList.remove('active');
                }
            }

            getStatusText(status) {
                const statusMap = {
                    'running': 'è¿è¡Œä¸­',
                    'pending': 'å¾…æ‰§è¡Œ',
                    'completed': 'å·²å®Œæˆ',
                    'error': 'é”™è¯¯'
                };
                return statusMap[status] || status;
            }

            setupEventListeners() {
                // å‘é€æ¶ˆæ¯
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                this.chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });

                // ä»‹å…¥æ¨¡å¼åˆ‡æ¢
                this.toggleBtns.forEach(btn => {
                    btn.addEventListener('click', () => this.toggleInterventionMode(btn));
                });

                // å·¥ä½œæµèŠ‚ç‚¹ç‚¹å‡»
                document.querySelectorAll('.workflow-node').forEach(node => {
                    node.addEventListener('click', () => this.selectWorkflowNode(node));
                });
            }

            async sendMessage() {
                const message = this.chatInput.value.trim();
                if (!message) return;

                // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°èŠå¤©
                this.addMessageToChat('user', message);
                this.chatInput.value = '';

                // å‘é€åˆ°åç«¯APIè¿›è¡Œæ™ºèƒ½å¤„ç†
                try {
                    const response = await fetch(`${this.apiBaseUrl}/mcp/intervention/trigger`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            type: 'user_message',
                            context: {
                                message: message,
                                timestamp: new Date().toISOString()
                            }
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        this.addMessageToChat('ai', `ğŸ¤– æ™ºèƒ½ä»‹å…¥å·²è§¦å‘ï¼\nä»‹å…¥ID: ${result.result.intervention_id}\né¢„è®¡å®Œæˆæ—¶é—´: ${result.result.estimated_completion}`);
                        
                        // å‘é€é£ä¹¦é€šçŸ¥
                        await this.sendFeishuNotification('æ™ºèƒ½ä»‹å…¥è§¦å‘', `ç”¨æˆ·è¯·æ±‚: ${message}`);
                    } else {
                        this.addMessageToChat('ai', `âŒ æ™ºèƒ½ä»‹å…¥å¤±è´¥: ${result.message}`);
                    }
                } catch (error) {
                    console.error('æ™ºèƒ½ä»‹å…¥APIè°ƒç”¨å¤±è´¥:', error);
                    // é™çº§åˆ°æ¨¡æ‹Ÿå“åº”
                    setTimeout(() => {
                        this.handleAIResponse(message);
                    }, 1000);
                }
            }

            async sendFeishuNotification(title, message) {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/feishu/notify/progress`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            task_name: title,
                            progress: 0,
                            status: message
                        })
                    });
                    
                    const result = await response.json();
                    if (result.success) {
                        this.showNotification('é£ä¹¦é€šçŸ¥å‘é€æˆåŠŸï¼');
                    }
                } catch (error) {
                    console.error('é£ä¹¦é€šçŸ¥å‘é€å¤±è´¥:', error);
                }
            }

            sendMessage() {
                // ä½¿ç”¨å¼‚æ­¥ç‰ˆæœ¬
                this.sendMessage();
            }

            addMessageToChat(sender, content) {
                const messagesContainer = document.querySelector('.chat-messages');
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                messageDiv.innerHTML = `
                    <div class="message-avatar">${sender === 'user' ? 'U' : 'AI'}</div>
                    <div class="message-content">
                        <p>${content}</p>
                    </div>
                `;
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }

            handleAIResponse(userMessage) {
                let response = '';
                
                if (userMessage.includes('GitHub') || userMessage.includes('github')) {
                    response = 'ğŸ” æ­£åœ¨æ£€æŸ¥GitHubçŠ¶æ€... æœ€æ–°æäº¤: v0.6ç‰ˆæœ¬å·²æˆåŠŸæ¨é€ï¼Œæ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼';
                } else if (userMessage.includes('é£ä¹¦') || userMessage.includes('é€šçŸ¥')) {
                    response = 'ğŸ“± é£ä¹¦é›†æˆæ­£å¸¸ï¼å·²å‘é€æµ‹è¯•é€šçŸ¥åˆ°å¼€å‘ç¾¤ç»„ï¼Œå›¢é˜Ÿæˆå‘˜å°†æ”¶åˆ°å®æ—¶æ›´æ–°ã€‚';
                } else if (userMessage.includes('æµ‹è¯•') || userMessage.includes('éƒ¨ç½²')) {
                    response = 'ğŸš€ å·¥ä½œæµçŠ¶æ€æ›´æ–°ï¼šç¼–ç å®Œæˆ92%ï¼Œæµ‹è¯•å‡†å¤‡ä¸­ï¼Œéƒ¨ç½²ç¯å¢ƒå¥åº·ã€‚æ˜¯å¦éœ€è¦æ‰§è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿ';
                } else {
                    response = 'ğŸ¤– æˆ‘æ­£åœ¨é€šè¿‡MCPåè°ƒå™¨å¤„ç†æ‚¨çš„è¯·æ±‚ï¼Œæ™ºèƒ½ä»‹å…¥ç³»ç»Ÿå·²æ¿€æ´»ï¼Œæ­£åœ¨åˆ†ææœ€ä½³æ‰§è¡Œæ–¹æ¡ˆ...';
                }
                
                this.addMessageToChat('ai', response);
                this.updateProgress();
            }

            toggleInterventionMode(btn) {
                btn.classList.toggle('active');
                const mode = btn.textContent;
                this.showNotification(`${mode}ä»‹å…¥æ¨¡å¼å·²${btn.classList.contains('active') ? 'å¯ç”¨' : 'ç¦ç”¨'}`);
            }

            selectWorkflowNode(node) {
                // ç§»é™¤å…¶ä»–èŠ‚ç‚¹çš„activeçŠ¶æ€
                document.querySelectorAll('.workflow-node').forEach(n => n.classList.remove('active'));
                // æ·»åŠ å½“å‰èŠ‚ç‚¹çš„activeçŠ¶æ€
                node.classList.add('active');
                
                const nodeType = node.classList.contains('coding') ? 'ç¼–ç ' : 
                                node.classList.contains('testing') ? 'æµ‹è¯•' : 'éƒ¨ç½²';
                this.showNotification(`å·²é€‰æ‹©${nodeType}å·¥ä½œæµèŠ‚ç‚¹`);
            }

            updateProgress() {
                const currentProgress = parseInt(this.taskProgress.textContent);
                const newProgress = Math.min(currentProgress + 10, 100);
                
                this.taskProgress.textContent = `${newProgress}%`;
                this.progressBar.style.width = `${newProgress}%`;
                
                if (newProgress === 100) {
                    this.taskText.textContent = 'æ™ºæ…§UI Dashboardåˆ›å»ºå®Œæˆï¼';
                    setTimeout(() => {
                        this.showNotification('ğŸ‰ æ™ºæ…§UIç³»ç»Ÿå·²å°±ç»ªï¼æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œã€‚');
                    }, 1000);
                }
            }

            startRealTimeUpdates() {
                // å®æ—¶æ•°æ®æ›´æ–° - æ¯10ç§’æ›´æ–°ä¸€æ¬¡
                setInterval(async () => {
                    await this.updateSystemStatus();
                    await this.updateWorkflowStatus();
                }, 10000);
                
                // æ¨¡æ‹Ÿå®æ—¶æŒ‡æ ‡æ›´æ–° - æ¯5ç§’æ›´æ–°ä¸€æ¬¡
                setInterval(() => {
                    this.updateSystemMetrics();
                }, 5000);
            }

            updateSystemMetrics() {
                // æ›´æ–°ç³»ç»ŸæŒ‡æ ‡
                const metrics = document.querySelectorAll('.metric-value');
                metrics.forEach(metric => {
                    if (metric.textContent.includes('%')) {
                        const currentValue = parseInt(metric.textContent);
                        const variation = Math.floor(Math.random() * 6) - 3; // -3 to +3
                        const newValue = Math.max(0, Math.min(100, currentValue + variation));
                        metric.textContent = `${newValue}%`;
                    }
                });
            }

            showNotification(message) {
                const toast = document.getElementById('notificationToast');
                const toastMessage = toast.querySelector('.toast-message');
                toastMessage.textContent = message;
                
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
        }

        // æ™ºèƒ½å»ºè®®æ‰§è¡Œå‡½æ•°
        async function executeAction(action) {
            const controller = window.smartUIController;
            
            try {
                switch(action) {
                    case 'view_github_status':
                        const githubResponse = await fetch(`${controller.apiBaseUrl}/github/sync/status`);
                        const githubData = await githubResponse.json();
                        
                        controller.addMessageToChat('ai', `ğŸ“Š GitHubçŠ¶æ€æ£€æŸ¥å®Œæˆï¼š\nâ€¢ ä»“åº“: ${githubData.repository}\nâ€¢ åˆ†æ”¯: ${githubData.branch}\nâ€¢ æœ€ååŒæ­¥: ${githubData.last_sync}\nâ€¢ WebhookçŠ¶æ€: ${githubData.webhook_status}\nâ€¢ æˆåŠŸç‡: ${githubData.statistics?.success_rate}%`);
                        break;
                        
                    case 'test_feishu_integration':
                        const feishuResponse = await fetch(`${controller.apiBaseUrl}/feishu/test`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' }
                        });
                        const feishuData = await feishuResponse.json();
                        
                        if (feishuData.success) {
                            controller.addMessageToChat('ai', 'ğŸ“± é£ä¹¦æµ‹è¯•é€šçŸ¥å·²å‘é€ï¼\nâ€¢ å¼€å‘ç¾¤ç»„: âœ… å·²é€è¾¾\nâ€¢ æ™ºæ…§UIç¾¤ç»„: âœ… å·²é€è¾¾\nå›¢é˜Ÿæˆå‘˜å°†æ”¶åˆ°å®æ—¶æ›´æ–°é€šçŸ¥ã€‚');
                        } else {
                            controller.addMessageToChat('ai', `âŒ é£ä¹¦æµ‹è¯•å¤±è´¥: ${feishuData.message}`);
                        }
                        break;
                        
                    case 'check_mcp_status':
                        const mcpResponse = await fetch(`${controller.apiBaseUrl}/mcp/health`);
                        const mcpData = await mcpResponse.json();
                        
                        controller.addMessageToChat('ai', `ğŸ”§ MCPåè°ƒå™¨ç³»ç»Ÿæ£€æŸ¥ï¼š\nâ€¢ æ•´ä½“çŠ¶æ€: ${mcpData.overall_status}\nâ€¢ ç»Ÿä¸€å·¥ä½œæµåè°ƒå™¨: âœ… ${mcpData.components?.unified_workflow_coordinator?.status}\nâ€¢ å¼€å‘ä»‹å…¥æ£€æµ‹: âœ… ${mcpData.components?.development_intervention?.status}\nâ€¢ Qwen 8Bæœ¬åœ°æ¨¡å‹: âœ… ${mcpData.components?.qwen_8b_local?.status}\nâ€¢ å†…å­˜ä½¿ç”¨: ${mcpData.performance_metrics?.memory_usage}\næ‰€æœ‰ç»„ä»¶è¿è¡ŒçŠ¶æ€è‰¯å¥½ï¼`);
                        break;
                }
                
                controller.showNotification('æ™ºèƒ½å»ºè®®å·²æ‰§è¡Œï¼');
                
            } catch (error) {
                console.error('æ™ºèƒ½å»ºè®®æ‰§è¡Œå¤±è´¥:', error);
                controller.addMessageToChat('ai', `âŒ æ“ä½œæ‰§è¡Œå¤±è´¥: ${error.message}`);
            }
        }

        // åˆå§‹åŒ–æ™ºæ…§UIæ§åˆ¶å™¨
        document.addEventListener('DOMContentLoaded', () => {
            window.smartUIController = new SmartUIController();
            
            // æ˜¾ç¤ºæ¬¢è¿é€šçŸ¥
            setTimeout(() => {
                window.smartUIController.showNotification('ğŸ¯ æ™ºæ…§UI Dashboardå·²å¯åŠ¨ï¼MCPåè°ƒå™¨å’Œé£ä¹¦é›†æˆå°±ç»ªã€‚');
            }, 1000);
        });
    </script>
</body>
</html>

